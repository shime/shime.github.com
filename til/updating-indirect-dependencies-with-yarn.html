<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="//gmpg.org/xfn/11" rel="profile">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/monokai.css?1595142312629072000">
  <link rel="stylesheet" href="/public/css/style.css?1595142312629072000">

  <link rel="icon" sizes="16x16 32x32 64x64" href="/public/favicon.ico">
<link rel="icon" type="image/png" sizes="196x196" href="/public/favicon-196.png">
<link rel="icon" type="image/png" sizes="160x160" href="/public/favicon-160.png">
<link rel="icon" type="image/png" sizes="128x128" href="/public/favicon-128.png">
<link rel="icon" type="image/png" sizes="96x96" href="/public/favicon-96.png">
<link rel="icon" type="image/png" sizes="64x64" href="/public/favicon-64.png">
<link rel="icon" type="image/png" sizes="32x32" href="/public/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/public/favicon-16.png">
<link rel="apple-touch-icon" href="/public/favicon-57.png">
<link rel="apple-touch-icon" sizes="180x180" href="/public/favicon-180.png">
<link rel="apple-touch-icon" sizes="152x152" href="/public/favicon-152.png">
<link rel="apple-touch-icon" sizes="144x144" href="/public/favicon-144.png">
<link rel="apple-touch-icon" sizes="120x120" href="/public/favicon-120.png">
<link rel="apple-touch-icon" sizes="114x114" href="/public/favicon-114.png">
<link rel="apple-touch-icon" sizes="76x76" href="/public/favicon-76.png">
<link rel="apple-touch-icon" sizes="72x72" href="/public/favicon-72.png">
<link rel="apple-touch-icon" sizes="60x60" href="/public/favicon-60.png">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-TileImage" content="/public/favicon-144.png">
<meta name="msapplication-config" content="/public/browserconfig.xml">


  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Updating indirect dependencies with Yarn" />
<meta name="author" content="Hrvoje Šimić" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Since JavaScript ecosystem consists of many small packages, your JavaScript project likely depends on many of them. Especially if you&#39;re using a tool like Webpack." />
<meta property="og:description" content="Since JavaScript ecosystem consists of many small packages, your JavaScript project likely depends on many of them. Especially if you&#39;re using a tool like Webpack." />
<link rel="canonical" href="http://shime.sh/til/updating-indirect-dependencies-with-yarn" />
<meta property="og:url" content="http://shime.sh/til/updating-indirect-dependencies-with-yarn" />
<meta property="og:site_name" content="Hrvoje Šimić" />
<meta property="og:image" content="http://shime.sh/public/social.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-22T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="http://shime.sh/public/social.jpg" />
<meta property="twitter:title" content="Updating indirect dependencies with Yarn" />
<meta name="twitter:site" content="@shime_sh" />
<meta name="twitter:creator" content="@shime_sh" />
<script type="application/ld+json">
{"headline":"Updating indirect dependencies with Yarn","dateModified":"2020-04-22T00:00:00+02:00","url":"http://shime.sh/til/updating-indirect-dependencies-with-yarn","datePublished":"2020-04-22T00:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://shime.sh/til/updating-indirect-dependencies-with-yarn"},"author":{"@type":"Person","name":"Hrvoje Šimić"},"description":"Since JavaScript ecosystem consists of many small packages, your JavaScript project likely depends on many of them. Especially if you&#39;re using a tool like Webpack.","@type":"BlogPosting","image":"http://shime.sh/public/social.jpg","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  
    <title> Updating indirect dependencies with Yarn &middot; Hrvoje Šimić </title>
  

  <meta name="title" content="Updating indirect dependencies with Yarn &middot; Hrvoje Šimić">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>

  
</head>


  <body class="font-sans">
    <div class="lg:pt-16 lg:pb-32 p-6 relative">
      




<div class="relative flex justify-between items-start w-full z-20 md:justify-center self-center">
  <div class="flex items-center">
    <a class="self-start w-16 h-16" href="/">
      <img class="self-start rounded-full w-16 h-16" src='/public/shime.jpg' alt='' />
    </a>

    <div class="flex flex-col ml-4">
      <a class="text-black font-bold text-xl no-underline font-extrabold self-start" href="/">Hrvoje Šimić</a>
      <a class="text-black font-bold no-underline font-extrabold my-1 self-start" href="https://twitter.com/shime_sh">@shime_sh</a>
      <ul class="hidden md:block list-reset tracking-wide">
        
        <li class="inline">
          
            <a class="font-medium text-xs text-grey no-underline uppercase mr-2 hover:text-blue-light" href='/articles/'>Articles</a>
          
        </li>
        
        <li class="inline">
          
            <a class="font-medium text-xs text-grey no-underline uppercase mr-2 hover:text-blue-light" href='/til/'>TIL</a>
          
        </li>
        
        <li class="inline">
          
            <a class="font-medium text-xs text-grey no-underline uppercase mr-2 hover:text-blue-light" href='/photography/'>Photography</a>
          
        </li>
        
        <li class="inline">
          
            <a class="font-medium text-xs text-grey no-underline uppercase mr-2 hover:text-blue-light" href='/reading/'>Reading list</a>
          
        </li>
        
        <li class="inline">
          
            <a class="font-medium text-xs text-grey no-underline uppercase mr-2 hover:text-blue-light" href='/subscribe'>Subscribe</a>
          
        </li>
        
      </ul>
    </div>
  </div>

  <div class="block md:hidden self-center">
    <button data-open-hamburger-menu="true">
      <svg height="32" width="32" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="black" class="heroicon-ui" d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"/>
      </svg>
    </button>

    <button data-close-hamburger-menu="true" class="hidden">
      <svg fill="black" height="32" id="close" viewBox="0 0 32 32" width="32" xmlns="http://www.w3.org/2000/svg">
        <path d="M4 8 L8 4 L16 12 L24 4 L28 8 L20 16 L28 24 L24 28 L16 20 L8 28 L4 24 L12 16 z"/>
      </svg>
    </button>
  </div>
</div>

<div class="hidden md:hidden fixed pin bg-white z-10 mt-32 pt-12" data-hamburger-menu="true">
  <ul class="list-reset tracking-wide flex flex-col items-center w-full">
    

    <li class="my-2">
      
        <a class="font-semibold text-xl text-black no-underline uppercase" href='/articles/'>Articles</a>
      
    </li>
    

    <li class="my-2">
      
        <a class="font-semibold text-xl text-black no-underline uppercase" href='/til/'>TIL</a>
      
    </li>
    

    <li class="my-2">
      
        <a class="font-semibold text-xl text-black no-underline uppercase" href='/photography/'>Photography</a>
      
    </li>
    

    <li class="my-2">
      
        <a class="font-semibold text-xl text-black no-underline uppercase" href='/reading/'>Reading list</a>
      
    </li>
    

    <li class="my-2">
      
        <a class="font-semibold text-xl text-black no-underline uppercase" href='/subscribe'>Subscribe</a>
      
    </li>
    
  </ul>
</div>


      <div class="w-full flex justify-center text-lg mt-16 text-grey-darker font-light leading-normal">
        <div class="flex-col">
          <div class="max-w-full">
            

          </div>

          <div class="post max-w-full md:max-w-md">
            
            

            <div>
              <a class="no-underline uppercase text-sm" href="/til"> ← til </a>
            </div>

            <div class="mb-8">
              <h1>Updating indirect dependencies with Yarn</h1>
              
              <div class="text-grey">
                April 22, 2020
              </div>
              

              <div class="flex my-2">
                
                  <span class="bg-blue-lightest py-1 px-2 text-center text-blue-dark mr-2 rounded text-sm">
                    javascript
                  </span>
                
              </div>
            </div>

            <p>Since JavaScript ecosystem consists of many small
packages, your JavaScript project likely depends on
many of them. Especially if you&#39;re using a tool like
Webpack.</p>

<p>Well, these dependencies have a security issue every once
in a while, which makes your project vulnerable to that
security issue.</p>

<p>Recently, Minimist had a security issue, so I had to
update it to version 1.2.3 or later. My project
does not depend directly on Minimist.</p>

<p>Unfortunately, this command didn&#39;t help:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>yarn upgrade minimist
</code></pre></div>
<p>Nothing happened since this command only
updates direct dependencies.</p>

<p>There are two ways to solve this problem.</p>

<h2>1. Using resolutions</h2>

<p>Yarn supports the <code>&quot;resolutions&quot;</code> field
in <code>package.json</code> for specifying custom package
versions or ranges <sup>[<a href="#resolutions">1</a>]</sup>.</p>

<p>I had to add this to the <code>package.json</code>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="s2">&quot;resoultions&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;minimist&quot;</span><span class="o">:</span> <span class="s2">&quot;^1.2.3&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>After specifying this, I had to remove the <code>yarn.lock</code> file and
run:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>yarn install
</code></pre></div>
<h2>2. Deleting dependents from the lock file manually</h2>

<p>This is another option, which doesn&#39;t require deleting entire
lock file.</p>

<p>Go through the lock file and delete anything that depends on
the problematic package (Minimist in my case). Delete entire blocks
of text that mention your package. After you have done that, run:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>yarn install
</code></pre></div>
<hr>

<p>Both of these solutions will only work if the patch version of the problematic
package is in the allowed range of it&#39;s dependants. Otherwise you will have 
to update the packages that depend on it too.</p>

<hr>

<ol>
<li><a name="resolutions"></a> For more info, refer to <a href="https://classic.yarnpkg.com/en/docs/selective-version-resolutions/">Yarn documentation</a>.</li>
</ol>



            
          </div>
        </div>
      </div>
    </div>
  </body>

  <script>
  var menu = document.querySelectorAll('[data-hamburger-menu]')[0]
  var openMenu = document.querySelectorAll('[data-open-hamburger-menu]')[0]
  var closeMenu = document.querySelectorAll('[data-close-hamburger-menu]')[0]
  var body = document.body

  openMenu.onclick = toggleMenu.bind(this, true);
  closeMenu.onclick = toggleMenu.bind(this, false);

  function toggleMenu(show) {
    toggleElements([openMenu], !show);
    toggleElements([menu, closeMenu], show);
    toggleScrolling(body, show);
  }

  function toggleElements(elements, show) {
    elements.forEach(function(element) {
      if (show) {
        element.classList.remove("hidden")
        element.classList.add("block");
      } else {
        element.classList.remove("block")
        element.classList.add("hidden");
      }
    })
  }

  function toggleScrolling(element, scrollDisabled) {
    var classes = ["scrolling-auto", "overflow-hidden", "fixed", "pin-x"];
    if (scrollDisabled) {
      classes.forEach(function(klass){
        element.classList.add(klass);
      })
    } else {
      classes.forEach(function(klass){
        element.classList.remove(klass);
      })
    }
  }

  var anchors = new AnchorJS();
  anchors.options = {
    placement: 'left'
  }
  anchors.add()
</script>

</html>
